!function(){const e=document.querySelector(".js-header__centro"),s=document.querySelector(".js-submenus__boton-consulta"),c=document.querySelector(".js-submenus__boton-chat"),t=document.querySelector(".js-contacto"),a=document.querySelector(".js-newsletter__form"),i=document.querySelector(".js-item__grid"),n=document.querySelector(".js-menus__cesta-numero"),o=document.querySelector(".js-submenus__cesta"),d=document.querySelector(".js-modal"),r=document.querySelector(".js-buscador");let l=[];const u=new class{limpiarHTML(e){for(;e.firstChild;)e.removeChild(e.firstChild)}quitarDescuento(e){for(let s=0;s<e.childElementCount;s++){let c=e.children[s].children[0],t=e.children[s].children[2].children[1].children[1];0===parseInt(c.children[0].textContent)&&(c.classList.add("u-display--none"),t.classList.add("u-display--none"))}}buscadorArticulos(){const e=document.createElement("div");e.classList.add("c-buscador__screen"),e.innerHTML="\n                <div class='c-buscador__contenedor'>\n                    <div class='c-buscador__cabecera'>\n                        <div class='c-buscador__logo'>\n                            <a href=\"https://javicerezo.github.io/tienda-online/\"><img src='build/img/logo.svg' alt='logo empresa'></a>\n                        </div>\n                        <form action='' class='c-buscador__form'>\n                            <input class='c-buscador__input' placeholder='Buscar...'>\n                            <i class=\"fa-solid fa-magnifying-glass\"></i>\n                        </form>\n                        <div class='c-buscador__close'>\n                            <i class='fa-solid fa-xmark'></i>\n                        </div>\n                    </div>\n                    <div class='c-buscador__contenido'>\n                        <div class='c-buscador__productos-populares'>\n                            <p class='c-buscador__p'>Búsquedas populares</p>\n                            <ul class='c-buscador__ul-populares'>\n                                <li class='c-buscador__li-populares'>Pies de gato</li>\n                                <li class='c-buscador__li-populares'>Grifone</li>\n                                <li class='c-buscador__li-populares'>Sacos de dormir</li>\n                                <li class='c-buscador__li-populares'>Petzl</li>\n                                <li class='c-buscador__li-populares'>La Sportiva</li>\n                                <li class='c-buscador__li-populares'>Cuerdas dinámicas</li>\n                                <li class='c-buscador__li-populares'>Patagonia</li>\n                                <li class='c-buscador__li-populares'>La Sportiva</li>\n                            </ul>\n                        </div>\n                        <div class='c-buscador__productos-buscar'>\n                            <p class='c-buscador__p'>Productos recomendados</p>\n                            <ul class='c-buscador__ul-buscar js-buscador__ul-buscar'>\n                                \n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            ",r.appendChild(e),r.classList.add("c-buscador--mod"),r.children[0].children[0].classList.add("c-buscador__screen--mod");const s=document.querySelector(".js-buscador__ul-buscar");ejemploBusqueda.forEach(e=>{const{marca:c,nombre:t,imagen:a,precio:i,descuento:n}=e;let o=i*((100-n)/100);o=Math.round(100*o)/100;const d=document.createElement("li");d.classList.add("c-buscador__li"),d.innerHTML=`\n                    <div class='c-buscador__li-descuento'>\n                        <p>${n}%</p>\n                    </div>\n                    <div class='c-buscador__li-img'>\n                        <img src='${a}' alt='imagen producto'>\n                    </div>                        \n                    <div class='c-buscador__li-contenido'>\n                        <p class='c-buscador__li-titulo'><span>${c} </span>${t}</p>                                        \n                        <div class ='c-buscador__li-contenido--mod'>\n                            <p class='c-buscador__li-precio'>${o} €</p>  \n                            <p class='c-buscador__li-precio--old'>${i} €</p>                        \n                        </div>\n                    </div>\n                `,s.appendChild(d)}),this.quitarDescuento(s)}leerArticulo(e,s){const c={imagen:s.querySelector("img").src,marca:s.querySelector(".c-item__contenido-titulo:first-Child").textContent,nombre:s.querySelector(".c-item__contenido-titulo:last-Child").textContent,precioNew:parseFloat(s.querySelector(".c-item__contenido-precio").textContent),precio:parseFloat(s.querySelector(".c-item__contenido-precio--old").textContent),descuento:parseFloat(s.querySelector(".c-item__descuento p").textContent),id:s.querySelector(".c-button").getAttribute("data-id"),cantidad:1};"carrito"===e&&(console.log("añadiendo al carrito"),this.agregarCarrito(c)),"modal"===e&&this.modalArticulos(c)}modalArticulos(e){const{imagen:s,marca:c,nombre:t,precioNew:a,precio:i,descuento:n}=e,o=document.createElement("div");o.classList.add("c-modal__screen"),o.innerHTML=`\n                <div class='c-modal__contenedor'>\n                    <div class='c-item__descuento c-modal__descuento'>\n                        <p>${n}%</p>\n                    </div>\n                    <div class='c-item__img c-modal__img'>\n                        <img src='${s}' alt='imagen producto'>\n                    </div>\n                    <div class='c-item__contenido c-modal__contenido'>\n                        <div class='c-item__contenido--mod'>\n                            <p class='c-item__contenido-titulo c-modal__contenido-titulo'><span>${c}</span></p>\n                            <p class='c-item__contenido-titulo c-modal__contenido-titulo'>${t}</p>\n                        </div>\n                        <div class ='c-item__contenido--mod'>\n                            <p class='c-item__contenido-precio c-modal__contenido-precio'>${a} €</p>  \n                            <p class='c-item__contenido-precio--old c-modal__contenido-precio--old'>${i} €</p>                        \n                        </div>                    \n                    </div>\n                    <div class='c-modal__close'>\n                        <i class='fa-solid fa-xmark'></i>\n                    </div> \n                </div>\n            `,d.appendChild(o),d.classList.add("c-modal--mod"),this.quitarDescuento(o)}agregarCarrito(e){if(l.some(s=>s.id===e.id)){const s=l.map(s=>s.id===e.id?(s.cantidad++,s):s);l=[...s],this.imprimircarrito(l)}else l=[...l,e],this.imprimircarrito(l)}eliminarArticulo(e){if(e.classList.contains("js-submenus__cesta-eliminar")){const s=e.getAttribute("data-id");l=l.filter(e=>e.id!=s),this.imprimircarrito(l)}}imprimircarrito(e){if(this.limpiarHTML(o),this.limpiarHTML(o.parentElement.children[1]),e.forEach(e=>{const{imagen:s,marca:c,nombre:t,precioNew:a,precio:i,descuento:n,cantidad:d,id:r}=e,l=document.createElement("li");l.classList.add("c-submenus__cesta-secciones","c-submenus__cesta-secciones--mod2"),l.innerHTML=`\n                    <div class="c-submenus__cesta-img">\n                        <img src="${s}" alt="imagen producto">\n                    </div>\n                    <div class="c-submenus__cesta-contenido">\n                        <p><span class="c-submenus__cesta-span">${c}</span> - ${t}</p>\n                        <div class='c-submenus__cesta-precios'>\n                            <p><span class="c-submenus__cesta-span">${a} €</span></p>\n                            <p>(${n}%) - <span class="c-submenus__cesta-span--old">${i}€</span></p>\n                        </div>\n                        <p>Cantidad: ${d} <a href="#" data-id=${r} class="c-submenus__cesta-eliminar js-submenus__cesta-eliminar">Eliminar</a></p>\n                    </div>\n                `,o.appendChild(l),0==n&&l.children[1].children[1].children[1].classList.add("u-display--none")}),0!=o.childElementCount){let s=e.reduce((e,s)=>e+s.cantidad*s.precioNew,0);s=Math.round(100*s)/100;const c=document.createElement("div");c.innerHTML=`\n                    <div class="c-submenus__separador">total: ${s} €</div>\n                    <div class="c-submenus__resultado">\n                        <a href="#" class="c-submenus__ver-cesta js-submenus__ver-cesta">Ver la cesta</a>\n                        <button class="c-button c-button--amarillo c-submenus__resultado-button js-submenus__resultado-button">tramitar</button>\n                    </div>\n                `,o.parentElement.children[1].appendChild(c)}this.comprobarCarrito(e)}comprobarCarrito(e){if(0==e.length){const e=document.createElement("li");e.classList.add("c-submenus__secciones"),e.innerHTML="\n                    <p>En este momento no hay productos en tu cesta.</p>\n                ",o.appendChild(e),u.numeroArticulos(0)}else{const s=e.reduce((e,s)=>e+s.cantidad,0);u.numeroArticulos(s)}}numeroArticulos(e){this.limpiarHTML(n);const s=document.createElement("p");s.textContent=e,n.appendChild(s)}imprimirDestacados(e){e.forEach(e=>{const{marca:s,nombre:c,imagen:t,precio:a,descuento:n,id:o}=e;let d=a*((100-n)/100);d=Math.round(100*d)/100;const r=document.createElement("div");r.classList.add("c-item__articulo"),r.innerHTML=`                        \n                    <div class='c-item__descuento js-descuento'>\n                        <p>${n}%</p>\n                    </div>\n                    <div class='c-item__img'>\n                        <img src='${t}' alt='imagen producto'>\n                    </div>                        \n                    <div class='c-item__contenido'>\n                        <div class='c-item__contenido--mod'>\n                            <p class='c-item__contenido-titulo'><span>${s}</span></p>\n                            <p class='c-item__contenido-titulo'>${c}</p>\n                        </div>\n                        <div class ='c-item__contenido--mod'>\n                            <p class='c-item__contenido-precio'>${d} €</p>  \n                            <p class='c-item__contenido-precio--old js-precio--old'>${a} €</p>                        \n                        </div>\n                        <button class="c-button c-button--amarillo" data-id=${o}>Añadir a la cesta</button>                    \n                    </div>\n                    <div class="c-item__mensaje"></div>\n                    `,i.appendChild(r)}),this.quitarDescuento(i)}imprimirAlerta(e,s,c){const t=document.createElement("p");t.classList.add("u-mensaje"),t.textContent=c,"exito"===s&&t.classList.add("u-mensaje--"+s),"error"===s&&t.classList.add("u-mensaje--"+s),e.parentElement.parentElement.children[3].appendChild(t),setTimeout(s=>{u.limpiarHTML(e.parentElement.parentElement.children[3])},3e3)}verCesta(e){e.classList.contains("js-submenus__ver-cesta")&&console.log("estas viendo la cesta")}tramitarPedido(e){e.classList.contains("js-submenus__resultado-button")&&console.log("estas tramitando el pedido")}};function m(){t.children[1].classList.toggle("c-contacto__screen--mod"),t.children[0].children[0].classList.toggle("c-contacto__img--mod"),t.children[0].children[0].classList.toggle("fa-envelope"),t.children[0].children[0].classList.toggle("fa-xmark"),t.children[0].children[0].classList.toggle("fa-solid"),t.children[0].children[0].classList.toggle("fa-regular")}function p(){a.children[2].classList.add("c-newsletter__form-radio--mod"),a.children[0].addEventListener("input",()=>{""!=a.children[0].value?a.children[1].classList.add("c-newsletter__label--mod"):a.children[1].classList.remove("c-newsletter__label--mod")})}window.addEventListener("DOMContentLoaded",()=>{u.comprobarCarrito(l),u.imprimirDestacados(destacados),s.addEventListener("click",m),t.children[0].addEventListener("click",m),a.children[0].addEventListener("click",p),c.addEventListener("click",()=>{console.log("has pulsado el boton del chat")}),e.addEventListener("click",()=>{u.buscadorArticulos()}),i.addEventListener("click",e=>{if(e.target.classList.contains("c-button")){const s=e.target.parentElement.parentElement;u.leerArticulo("carrito",s),u.imprimirAlerta(e.target,"exito","has añadido el producto al carrito")}if(e.target.parentElement.classList.contains("c-item__img")){const s=e.target.parentElement.parentElement;u.leerArticulo("modal",s)}}),o.addEventListener("click",e=>{u.eliminarArticulo(e.target)}),o.parentElement.children[1].addEventListener("click",e=>{u.verCesta(e.target),u.tramitarPedido(e.target)}),d.addEventListener("click",e=>{e.target.classList.contains("fa-solid")&&(d.classList.remove("c-modal--mod"),setTimeout(()=>{u.limpiarHTML(d)},1e3))}),r.addEventListener("click",e=>{(e.target.classList.contains("c-buscador__close")||e.target.classList.contains("fa-solid"))&&(r.classList.remove("c-buscador--mod"),setTimeout(()=>{u.limpiarHTML(r)},1e3))})})}();const destacados=[{marca:"Marca",nombre:"Producto 1",imagen:"build/img/destacados/destacados1.jpg",precio:115.49,descuento:0,sexo:"h",id:1},{marca:"Marca",nombre:"Producto 2",imagen:"build/img/destacados/destacados2.jpg",precio:50.55,descuento:18,sexo:"m",id:2},{marca:"Marca",nombre:"Producto 3",imagen:"build/img/destacados/destacados3.jpg",precio:322.8,descuento:21,sexo:"u",id:3},{marca:"Marca",nombre:"Producto 4",imagen:"build/img/destacados/destacados4.jpg",precio:150.15,descuento:43,sexo:"u",id:4},{marca:"Marca",nombre:"Producto 5",imagen:"build/img/destacados/destacados5.jpg",precio:80.45,descuento:0,sexo:"u",id:5}],ejemploBusqueda=[{marca:"Peztl",nombre:"Quark",imagen:"build/img/ejemplo-busquedas/ejemplo1.jpg",precio:242,descuento:25,sexo:"h",id:6},{marca:"Atomic",nombre:"Nightshade",imagen:"build/img/ejemplo-busquedas/ejemplo2.jpg",precio:129.99,descuento:30,sexo:"m",id:7},{marca:"Scarpa",nombre:"Ribelle HD",imagen:"build/img/ejemplo-busquedas/ejemplo3.jpg",precio:312.55,descuento:0,sexo:"u",id:8}];
//# sourceMappingURL=bundle.js.map
