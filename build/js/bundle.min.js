!function(){const e=document.querySelector(".js-header__centro"),a=document.querySelector(".js-submenus__boton-consulta"),i=document.querySelector(".js-submenus__boton-chat"),s=document.querySelector(".js-contacto"),t=document.querySelector(".js-newsletter__form"),c=document.querySelector(".js-item__grid"),o=document.querySelector(".js-menus__cesta-numero"),r=document.querySelector(".js-submenus__cesta"),n=document.querySelector(".js-modal"),l=document.querySelector(".js-buscador");let d=[];const m=[destacados,ejemploBusqueda,materialDeportivo];const u=new class{limpiarHTML(e){for(;e.firstChild;)e.removeChild(e.firstChild)}recorrerBD(e,a,i){e.forEach(e=>{const{marca:s,nombre:t,imagen:c,precio:o,descuento:r,id:n}=e;let l=o*((100-r)/100);l=Math.round(100*l)/100;const d=document.createElement("li");d.classList.add(i+"__li"),d.innerHTML=`                        \n                    <div class='${i}__li-descuento js-descuento'>\n                        <p>${r}%</p>\n                    </div>\n                    <div class='${i}__li-img'>\n                        <img src='${c}' alt='imagen producto'>\n                    </div>                        \n                    <div class='${i}__li-contenido'>\n                        <div class='${i}__li-contenido--mod'>\n                            <p class='${i}__li-titulo'><span>${s}</span></p>\n                            <p class='${i}__li-titulo'>${t}</p>\n                        </div>\n                        <div class ='${i}__li-contenido--mod'>\n                            <p class='${i}__li-precio'>${l} €</p>  \n                            <p class='${i}__li-precio--old js-precio--old'>${o} €</p>                        \n                        </div>\n                        <button class="${i}__li-button c-button c-button--amarillo" data-id=${n}>Añadir a la cesta</button>                    \n                    </div>\n                    <div class="${i}__mensaje"></div>\n                    `,a.appendChild(d)}),this.quitarDescuento(a)}quitarDescuento(e){for(let a=0;a<e.childElementCount;a++){let i=e.children[a].children[0],s=e.children[a].children[2].children[1].children[1];0===parseInt(i.children[0].textContent)&&(i.classList.add("u-display--none"),s.classList.add("u-display--none"))}}buscadorArticulos(){const e=document.createElement("div");e.classList.add("c-buscador__screen"),e.innerHTML="\n                <div class='c-buscador__contenedor'>\n                    <div class='c-buscador__cabecera'>\n                        <div class='c-buscador__logo'>\n                            <a href=\"https://javicerezo.github.io/tienda-online/\"><img src='build/img/logo.svg' alt='logo empresa'></a>\n                        </div>\n                        <form action='' class='c-buscador__form'>\n                            <input class='c-buscador__input' placeholder='Buscar...'>\n                            <i class=\"fa-solid fa-magnifying-glass\"></i>\n                        </form>\n                        <div class='c-buscador__close'>\n                            <i class='fa-solid fa-xmark'></i>\n                        </div>\n                    </div>\n                    <div class='c-buscador__contenido'>\n                        <div class='c-buscador__productos-populares'>\n                            <p class='c-buscador__p'>Búsquedas populares</p>\n                            <ul class='c-buscador__ul-populares'>\n                                <li class='c-buscador__li-populares'>Pies de gato</li>\n                                <li class='c-buscador__li-populares'>Grifone</li>\n                                <li class='c-buscador__li-populares'>Sacos de dormir</li>\n                                <li class='c-buscador__li-populares'>Petzl</li>\n                                <li class='c-buscador__li-populares'>La Sportiva</li>\n                                <li class='c-buscador__li-populares'>Cuerdas</li>\n                                <li class='c-buscador__li-populares'>Patagonia</li>\n                            </ul>\n                        </div>\n                        <div class='c-buscador__productos-buscar'>\n                            <p class='c-buscador__p'>Productos recomendados</p>\n                            <ul class='c-buscador__ul-buscar js-buscador__ul-buscar'>\n                                \n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            ",l.appendChild(e),l.classList.add("c-buscador--mod"),l.children[0].children[0].classList.add("c-buscador__screen--mod");const a=document.querySelector(".js-buscador__ul-buscar");this.recorrerBD(ejemploBusqueda,a,"c-buscador")}filtarArticulos(e,a){let i=[];m.forEach(a=>{a.forEach(a=>{const s=`${a.marca} ${a.nombre}`,t=i.some(e=>e.id===a.id);s.includes(e)&&0==t&&(i=[...i,a])})}),0===i.length?this.imprimirAlerta(a,"alerta","Ups... Prueba con otra búsqueda"):this.recorrerBD(i,a,"c-buscador")}leerArticulo(e,a,i){const s={imagen:a.querySelector("img").src,marca:a.querySelector("."+i+"__li-titulo:first-Child").textContent,nombre:a.querySelector("."+i+"__li-titulo:last-Child").textContent,precioNew:parseFloat(a.querySelector("."+i+"__li-precio").textContent),precio:parseFloat(a.querySelector("."+i+"__li-precio--old").textContent),descuento:parseFloat(a.querySelector("."+i+"__li-descuento p").textContent),id:a.querySelector(".c-button").getAttribute("data-id"),cantidad:1};"carrito"===e&&this.agregarCarrito(s),"modal"===e&&this.modalArticulos(s)}modalArticulos(e){const{imagen:a,marca:i,nombre:s,precioNew:t,precio:c,descuento:o}=e,r=document.createElement("div");r.classList.add("c-modal__screen"),r.innerHTML=`\n                <div class='c-modal__li'>\n                    <div class='c-modal__li-descuento'>\n                        <p>${o}%</p>\n                    </div>\n                    <div class='c-modal__li-img'>\n                        <img src='${a}' alt='imagen producto'>\n                    </div>\n                    <div class='c-modal__contenido'>\n                        <div class='c-modal__li-contenido--mod'>\n                            <p class='c-modal__li-titulo'><span>${i}</span></p>\n                            <p class='c-modal__li-titulo'>${s}</p>\n                        </div>\n                        <div class ='c-modal__li-contenido--mod'>\n                            <p class='c-modal__li-precio'>${t} €</p>  \n                            <p class='c-modal__li-precio--old'>${c} €</p>                        \n                        </div>                    \n                    </div>\n                    <div class='c-modal__li-close'>\n                        <i class='fa-solid fa-xmark'></i>\n                    </div> \n                </div>\n            `,n.appendChild(r),n.classList.add("c-modal--mod"),this.quitarDescuento(r)}agregarCarrito(e){if(d.some(a=>a.id===e.id)){const a=d.map(a=>a.id===e.id?(a.cantidad++,a):a);d=[...a],this.imprimircarrito(d)}else d=[...d,e],this.imprimircarrito(d)}eliminarArticulo(e){if(e.classList.contains("js-submenus__cesta-eliminar")){const a=e.getAttribute("data-id");d=d.filter(e=>e.id!=a),this.imprimircarrito(d)}}imprimircarrito(e){if(this.limpiarHTML(r),this.limpiarHTML(r.parentElement.children[1]),e.forEach(e=>{const{imagen:a,marca:i,nombre:s,precioNew:t,precio:c,descuento:o,cantidad:n,id:l}=e,d=document.createElement("li");d.classList.add("c-submenus__cesta-secciones","c-submenus__cesta-secciones--mod2"),d.innerHTML=`\n                    <div class="c-submenus__cesta-img">\n                        <img src="${a}" alt="imagen producto">\n                    </div>\n                    <div class="c-submenus__cesta-contenido">\n                        <p><span class="c-submenus__cesta-span">${i}</span> - ${s}</p>\n                        <div class='c-submenus__cesta-precios'>\n                            <p><span class="c-submenus__cesta-span">${t} €</span></p>\n                            <p>(${o}%) - <span class="c-submenus__cesta-span--old">${c}€</span></p>\n                        </div>\n                        <p>Cantidad: ${n} <a href="#" data-id=${l} class="c-submenus__cesta-eliminar js-submenus__cesta-eliminar">Eliminar</a></p>\n                    </div>\n                `,r.appendChild(d),0==o&&d.children[1].children[1].children[1].classList.add("u-display--none")}),0!=r.childElementCount){let a=e.reduce((e,a)=>e+a.cantidad*a.precioNew,0);a=Math.round(100*a)/100;const i=document.createElement("div");i.innerHTML=`\n                    <div class="c-submenus__separador">total: ${a} €</div>\n                    <div class="c-submenus__resultado">\n                        <a href="#" class="c-submenus__ver-cesta js-submenus__ver-cesta">Ver la cesta</a>\n                        <button class="c-button c-button--amarillo c-submenus__resultado-button js-submenus__resultado-button">tramitar</button>\n                    </div>\n                `,r.parentElement.children[1].appendChild(i)}this.comprobarCarrito(e)}comprobarCarrito(e){if(0==e.length){const e=document.createElement("li");e.classList.add("c-submenus__secciones"),e.innerHTML="\n                    <p>En este momento no hay productos en tu cesta.</p>\n                ",r.appendChild(e),u.numeroArticulos(0)}else{const a=e.reduce((e,a)=>e+a.cantidad,0);u.numeroArticulos(a)}}numeroArticulos(e){this.limpiarHTML(o);const a=document.createElement("p");a.textContent=e,o.appendChild(a)}imprimirAlerta(e,a,i){if(0===e.childElementCount){const s=document.createElement("p");s.classList.add("u-mensaje"),s.textContent=i,"exito"===a&&s.classList.add("u-mensaje--"+a),"error"===a&&s.classList.add("u-mensaje--"+a),"alerta"===a&&s.classList.add("u-mensaje--"+a),e.appendChild(s),0==e.classList.contains("c-buscador__ul-buscar")&&(console.log("eliminando"),setTimeout(a=>{u.limpiarHTML(e)},3e3))}}verCesta(e){e.classList.contains("js-submenus__ver-cesta")&&console.log("estas viendo la cesta")}tramitarPedido(e){e.classList.contains("js-submenus__resultado-button")&&console.log("estas tramitando el pedido")}};function p(){s.children[1].classList.toggle("c-contacto__screen--mod"),s.children[0].children[0].classList.toggle("c-contacto__img--mod"),s.children[0].children[0].classList.toggle("fa-envelope"),s.children[0].children[0].classList.toggle("fa-xmark"),s.children[0].children[0].classList.toggle("fa-solid"),s.children[0].children[0].classList.toggle("fa-regular")}function g(){t.children[2].classList.add("c-newsletter__form-radio--mod"),t.children[0].addEventListener("input",()=>{""!=t.children[0].value?t.children[1].classList.add("c-newsletter__label--mod"):t.children[1].classList.remove("c-newsletter__label--mod")})}window.addEventListener("DOMContentLoaded",()=>{u.comprobarCarrito(d),u.recorrerBD(destacados,c,"c-item"),a.addEventListener("click",p),s.children[0].addEventListener("click",p),t.children[0].addEventListener("click",g),i.addEventListener("click",()=>{console.log("has pulsado el boton del chat")}),e.addEventListener("click",()=>{u.buscadorArticulos()}),c.addEventListener("click",e=>{if(e.target.classList.contains("c-button")){const a=e.target.parentElement.parentElement,i=e.target.parentElement.parentElement.children[3];u.leerArticulo("carrito",a,"c-item"),u.imprimirAlerta(i,"exito","has añadido el producto al carrito")}if(e.target.parentElement.classList.contains("c-item__li-img")){const a=e.target.parentElement.parentElement;u.leerArticulo("modal",a,"c-item")}}),r.addEventListener("click",e=>{u.eliminarArticulo(e.target)}),r.parentElement.children[1].addEventListener("click",e=>{u.verCesta(e.target),u.tramitarPedido(e.target)}),n.addEventListener("click",e=>{e.target.classList.contains("fa-solid")&&(n.classList.remove("c-modal--mod"),setTimeout(()=>{u.limpiarHTML(n)},100))}),l.addEventListener("click",e=>{const a=document.querySelector(".js-buscador__ul-buscar");if((e.target.classList.contains("c-buscador__close")||e.target.classList.contains("fa-solid"))&&(l.classList.remove("c-buscador--mod"),setTimeout(()=>{u.limpiarHTML(l)},100)),e.target.classList.contains("c-button")){const a=e.target.parentElement.parentElement,i=e.target.parentElement.parentElement.children[3];u.leerArticulo("carrito",a,"c-buscador"),u.imprimirAlerta(i,"exito","has añadido el producto al carrito")}if(e.target.parentElement.classList.contains("c-buscador__li-img")){const a=e.target.parentElement.parentElement;u.leerArticulo("modal",a,"c-buscador")}e.target.classList.contains("c-buscador__li-populares")&&(u.limpiarHTML(a),u.filtarArticulos(e.target.textContent,a))}),l.addEventListener("input",e=>{const a=document.querySelector(".js-buscador__ul-buscar");if(e.target.classList.contains("c-buscador__input")&&0!=e.target.value){u.limpiarHTML(a);let i=e.target.value;u.filtarArticulos(i,materialDeportivo,a)}})})}();const destacados=[{marca:"Roxi",nombre:"Liberty Hoodie W",imagen:"build/img/destacados/destacados1.jpg",precio:115.49,descuento:0,sexo:"h",id:1},{marca:"Grifone",nombre:"Costoia Pants",imagen:"build/img/destacados/destacados2.jpg",precio:50.55,descuento:18,sexo:"m",id:2},{marca:"Trangoworld",nombre:"Velez",imagen:"build/img/destacados/destacados3.jpg",precio:322.8,descuento:1,sexo:"u",id:3},{marca:"Grifone",nombre:"Adur Jacket W",imagen:"build/img/destacados/destacados4.jpg",precio:150.15,descuento:43,sexo:"u",id:4},{marca:"Salomon",nombre:" Speed Jaket W",imagen:"build/img/destacados/destacados5.jpg",precio:80.45,descuento:33,sexo:"u",id:5},{marca:"The North Face",nombre:"Summit Pro 120",imagen:"build/img/destacados/destacados6.jpg",precio:322.8,descuento:50,sexo:"u",id:6},{marca:"Salomon",nombre:"Pierra Ment Pant",imagen:"build/img/destacados/destacados7.jpg",precio:150.15,descuento:60,sexo:"u",id:7},{marca:"+8000",nombre:"TLT Gtx Overpant",imagen:"build/img/destacados/destacados8.jpg",precio:80.45,descuento:8,sexo:"u",id:8}],ejemploBusqueda=[{marca:"Petzl",nombre:"Quark",imagen:"build/img/ejemplo-busquedas/ejemplo1.jpg",precio:242,descuento:25,sexo:"h",id:9},{marca:"Atomic",nombre:"Nightshade",imagen:"build/img/ejemplo-busquedas/ejemplo2.jpg",precio:129.99,descuento:30,sexo:"m",id:10},{marca:"Scarpa",nombre:"Ribelle HD",imagen:"build/img/ejemplo-busquedas/ejemplo3.jpg",precio:312.55,descuento:0,sexo:"u",id:11}],materialDeportivo=[{marca:"Petzl",nombre:"Quark",imagen:"build/img/ejemplo-busquedas/ejemplo1.jpg",precio:242,descuento:25,sexo:"h",id:9},{marca:"La Sportiva",nombre:"miura",imagen:"build/img/material/material1.jpg",precio:145.99,descuento:9,sexo:"h",id:12},{marca:"La Sportiva",nombre:"Kataki",imagen:"build/img/material/material2.jpg",precio:151.95,descuento:9,sexo:"m",id:13},{marca:"La Sportiva",nombre:"Katana",imagen:"build/img/material/material3.jpg",precio:139,descuento:9,sexo:"u",id:14},{marca:"Totem Cams",nombre:"0.65",imagen:"build/img/material/material4.jpg",precio:84.95,descuento:0,sexo:"m",id:15},{marca:"Totem Cams",nombre:"1.80",imagen:"build/img/material/material5.jpg",precio:84.95,descuento:0,sexo:"u",id:16},{marca:"Totem Cams",nombre:"Set intermedio",imagen:"build/img/material/material6.jpg",precio:264.95,descuento:0,sexo:"m",id:17},{marca:"Petzl",nombre:"Tango 8.5mm x 60m",imagen:"build/img/material/material7.jpg",precio:140,descuento:29,sexo:"u",id:18},{marca:"Petzl",nombre:"Paso Guide 7.7mm x 60m",imagen:"build/img/material/material8.jpg",precio:152,descuento:25,sexo:"m",id:19},{marca:"Petzl",nombre:"Volta Guide 9.2mm x 30m",imagen:"build/img/material/material9.jpg",precio:116.5,descuento:29,sexo:"u",id:20},{marca:"Petzl",nombre:"Pack 6 Djinn Axess 12cm",imagen:"build/img/material/material10.jpg",precio:151.95,descuento:9,sexo:"m",id:21},{marca:"Fixe",nombre:"Lotus rosca",imagen:"build/img/material/material11.jpg",precio:11.99,descuento:12,sexo:"u",id:22},{marca:"Camp",nombre:"Nano 22 Rack Pack",imagen:"build/img/material/material12.jpg",precio:46,descuento:10,sexo:"m",id:23},{marca:"Petzl",nombre:"OK Triact-Lock",imagen:"build/img/material/material13.jpg",precio:139,descuento:9,sexo:"u",id:24},{marca:"Kong",nombre:"Frog Quickdraw",imagen:"build/img/material/material14.jpg",precio:35.48,descuento:14,sexo:"m",id:25},{marca:"Black Diamond",nombre:"ATC-Guide",imagen:"build/img/material/material15.jpg",precio:39,descuento:12,sexo:"u",id:26},{marca:"Climbing Technology",nombre:"Alpine Up",imagen:"build/img/material/material16.jpg",precio:115.95,descuento:20,sexo:"m",id:27},{marca:"Petzl",nombre:"Grigri +",imagen:"build/img/material/material17.jpg",precio:121,descuento:30,sexo:"u",id:28},{marca:"Fixe",nombre:"Parabold M12 x 90mm (20 uds)",imagen:"build/img/material/material18.jpg",precio:110.45,descuento:30,sexo:"m",id:29},{marca:"Grivel",nombre:"Stealth Titanium",imagen:"build/img/material/material19.jpg",precio:102,descuento:23,sexo:"u",id:30},{marca:"Mammut",nombre:"Skywalker 2",imagen:"build/img/material/material20.jpg",precio:70,descuento:40,sexo:"m",id:31},{marca:"Petzl",nombre:"Meteor S/M",imagen:"build/img/material/material21.jpg",precio:90.75,descuento:20,sexo:"u",id:32},{marca:"The North Face",nombre:"Summit Pro 120",imagen:"build/img/destacados/destacados6.jpg",precio:322.8,descuento:50,sexo:"u",id:6},{marca:"Salomon",nombre:"Pierra Ment Pant",imagen:"build/img/destacados/destacados7.jpg",precio:150.15,descuento:60,sexo:"u",id:7},{marca:"+8000",nombre:"TLT Gtx Overpant",imagen:"build/img/destacados/destacados8.jpg",precio:80.45,descuento:8,sexo:"u",id:8}];
//# sourceMappingURL=bundle.js.map
