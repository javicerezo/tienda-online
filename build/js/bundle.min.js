!function(){const e=document.querySelector(".js-header__centro"),t=document.querySelector(".js-submenus__boton-consulta"),n=document.querySelector(".js-submenus__boton-chat"),s=document.querySelector(".js-contacto"),c=document.querySelector(".js-newsletter__form"),i=document.querySelector(".js-item__grid"),a=document.querySelector(".js-menus__cesta-numero"),o=document.querySelector(".js-submenus__cesta");let r=[];const d=new class{limpiarHTML(e){for(;e.firstChild;)e.removeChild(e.firstChild)}leerArticulo(e){const t={imagen:e.querySelector("img").src,marca:e.querySelector(".c-item__contenido-titulo:first-Child").textContent,nombre:e.querySelector(".c-item__contenido-titulo:last-Child").textContent,precioNew:parseFloat(e.querySelector(".c-item__contenido-precio").textContent),precio:parseFloat(e.querySelector(".c-item__contenido-precio--old").textContent),descuento:parseFloat(e.querySelector(".c-item__descuento p").textContent),id:e.querySelector(".c-button").getAttribute("data-id"),cantidad:1};this.agregarCarrito(t)}agregarCarrito(e){if(r.some(t=>t.id===e.id)){const t=r.map(t=>t.id===e.id?(t.cantidad++,t):t);r=[...t],this.imprimircarrito(r)}else r=[...r,e],this.imprimircarrito(r)}eliminarArticulo(e){if(e.classList.contains("js-submenus__cesta-eliminar")){const t=e.getAttribute("data-id");r=r.filter(e=>e.id!=t),this.imprimircarrito(r)}}imprimircarrito(e){if(this.limpiarHTML(o),this.limpiarHTML(o.parentElement.children[1]),e.forEach(e=>{const{imagen:t,marca:n,nombre:s,precioNew:c,precio:i,descuento:a,cantidad:r,id:d}=e,l=document.createElement("li");l.classList.add("c-submenus__cesta-secciones","c-submenus__cesta-secciones--mod2"),l.innerHTML=`\n                    <div class="c-submenus__cesta-img">\n                        <img src="${t}" alt="imagen producto">\n                    </div>\n                    <div class="c-submenus__cesta-contenido">\n                        <p><span class="c-submenus__cesta-span">${n}</span> - ${s}</p>\n                        <div class='c-submenus__cesta-precios'>\n                            <p><span class="c-submenus__cesta-span">${c} €</span></p>\n                            <p>(${a}%) - <span class="c-submenus__cesta-span--old">${i}€</span></p>\n                        </div>\n                        <p>Cantidad: ${r} <a href="#" data-id=${d} class="c-submenus__cesta-eliminar js-submenus__cesta-eliminar">Eliminar</a></p>\n                    </div>\n                `,o.appendChild(l),0==a&&l.children[1].children[1].children[1].classList.add("u-display--none")}),0!=o.childElementCount){let t=e.reduce((e,t)=>e+t.cantidad*t.precioNew,0);t=Math.round(100*t)/100;const n=document.createElement("div");n.innerHTML=`\n                    <div class="c-submenus__separador">total: ${t} €</div>\n                    <div class="c-submenus__resultado">\n                        <a href="#" class="c-submenus__ver-cesta js-submenus__ver-cesta">Ver la cesta</a>\n                        <button class="c-button c-button--amarillo c-submenus__resultado-button js-submenus__resultado-button">tramitar</button>\n                    </div>\n                `,o.parentElement.children[1].appendChild(n)}this.comprobarCarrito(e)}comprobarCarrito(e){if(0==e.length){const e=document.createElement("li");e.classList.add("c-submenus__secciones"),e.innerHTML="\n                    <p>En este momento no hay productos en tu cesta.</p>\n                ",o.appendChild(e),d.numeroArticulos(0)}else{const t=e.reduce((e,t)=>e+t.cantidad,0);d.numeroArticulos(t)}}numeroArticulos(e){this.limpiarHTML(a);const t=document.createElement("p");t.textContent=e,a.appendChild(t)}imprimirDestacados(e){e.forEach(e=>{const{marca:t,nombre:n,imagen:s,precio:c,descuento:a,id:o}=e;let r=c*((100-a)/100);r=Math.round(100*r)/100;const d=document.createElement("div");d.classList.add("c-item__articulo"),d.innerHTML=`                        \n                    <div class='c-item__descuento'>\n                        <p>${a}%</p>\n                    </div>\n                    <div class='c-item__img'>\n                        <img src='${s}' alt='imagen producto'>\n                    </div>                        \n                    <div class='c-item__contenido'>\n                        <div class='c-item__contenido--mod'>\n                            <p class='c-item__contenido-titulo'><span>${t}</span></p>\n                            <p class='c-item__contenido-titulo'>${n}</p>\n                        </div>\n                        <div class ='c-item__contenido--mod'>\n                            <p class='c-item__contenido-precio'>${r} €</p>  \n                            <p class='c-item__contenido-precio--old'>${c} €</p>                        \n                        </div>\n                        <button class="c-button c-button--amarillo" data-id=${o}>Añadir a la cesta</button>                    \n                    </div>\n                    <div class="c-item__mensaje"></div>\n                    `,i.appendChild(d)});for(let e=0;e<i.childElementCount;e++){0===parseInt(i.children[e].children[0].children[0].textContent)&&(i.children[e].children[0].classList.add("u-display--none"),i.children[e].children[2].children[1].children[1].classList.add("u-display--none"))}}imprimirAlerta(e,t,n){const s=document.createElement("p");s.classList.add("u-mensaje"),s.textContent=n,"exito"===t&&s.classList.add("u-mensaje--"+t),"error"===t&&s.classList.add("u-mensaje--"+t),e.parentElement.parentElement.children[3].appendChild(s),setTimeout(t=>{d.limpiarHTML(e.parentElement.parentElement.children[3])},3e3)}verCesta(e){e.classList.contains("js-submenus__ver-cesta")&&console.log("estas viendo la cesta")}tramitarPedido(e){e.classList.contains("js-submenus__resultado-button")&&console.log("estas tramitando el pedido")}};function l(){s.children[1].classList.toggle("c-contacto__screen--mod"),s.children[0].children[0].classList.toggle("c-contacto__img--mod"),s.children[0].children[0].classList.toggle("fa-envelope"),s.children[0].children[0].classList.toggle("fa-xmark"),s.children[0].children[0].classList.toggle("fa-solid"),s.children[0].children[0].classList.toggle("fa-regular")}function m(){c.children[2].classList.add("c-newsletter__form-radio--mod"),c.children[0].addEventListener("input",()=>{""!=c.children[0].value?c.children[1].classList.add("c-newsletter__label--mod"):c.children[1].classList.remove("c-newsletter__label--mod")})}window.addEventListener("DOMContentLoaded",()=>{d.comprobarCarrito(r),d.imprimirDestacados(destacados),t.addEventListener("click",l),s.children[0].addEventListener("click",l),c.children[0].addEventListener("click",m),n.addEventListener("click",()=>{console.log("has pulsado el boton del chat")}),e.addEventListener("click",()=>{console.log("has pulsado el buscador")}),i.addEventListener("click",e=>{if(e.target.classList.contains("c-button")){const t=e.target.parentElement.parentElement;d.leerArticulo(t),d.imprimirAlerta(e.target,"exito","has añadido el producto al carrito")}}),o.addEventListener("click",e=>{d.eliminarArticulo(e.target)}),o.parentElement.children[1].addEventListener("click",e=>{d.verCesta(e.target),d.tramitarPedido(e.target)})})}();const destacados=[{marca:"Marca",nombre:"Producto 1",imagen:"build/img/destacados/destacados1.jpg",precio:115.49,descuento:0,sexo:"h",id:1},{marca:"Marca",nombre:"Producto 2",imagen:"build/img/destacados/destacados2.jpg",precio:50.55,descuento:18,sexo:"m",id:2},{marca:"Marca",nombre:"Producto 3",imagen:"build/img/destacados/destacados3.jpg",precio:322.8,descuento:21,sexo:"u",id:3},{marca:"Marca",nombre:"Producto 4",imagen:"build/img/destacados/destacados4.jpg",precio:150.15,descuento:43,sexo:"u",id:4},{marca:"Marca",nombre:"Producto 5",imagen:"build/img/destacados/destacados5.jpg",precio:80.45,descuento:0,sexo:"u",id:5}];
//# sourceMappingURL=bundle.js.map
